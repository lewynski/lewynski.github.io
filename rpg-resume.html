<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jon's Pixel Resume Journey</title>

    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- CUSTOM RETRO CURSOR --- */
        body {
            margin: 0; padding: 0; overflow: hidden;
            background-color: #0f172a; font-family: 'Inter', sans-serif;
            /* Default retro hand cursor */
            cursor: url('https://labs.phaser.io/assets/sprites/hand.png'), auto;
        }

        /* Changes to a pointing finger on interactive elements */
        a, button, .ctrl-btn {
            cursor: url('https://labs.phaser.io/assets/sprites/cursor.png'), pointer !important;
        }

        #infoCard {
            position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 550px;
            background: rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 16px; padding: 28px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6), 0 0 20px rgba(59, 130, 246, 0.1);
            display: none; color: #f8fafc; text-align: left; z-index: 100;
            transition: opacity 0.3s ease, transform 0.3s ease;
            opacity: 0; transform: translate(-50%, 20px);
        }

        #infoCard.active { display: block; opacity: 1; transform: translate(-50%, 0); }

        #infoCard h2 {
            margin: 0 0 12px 0; font-weight: 700; font-size: 1.4rem;
            color: #60a5fa; border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 10px; display: flex; align-items: center; gap: 10px;
        }

        #infoCard p { font-size: 1.05rem; color: #cbd5e1; line-height: 1.6; margin: 0; }
        #infoCard p strong { color: #ffffff; font-weight: 600; }

        .back-btn {
            position: absolute; top: 20px; left: 20px; z-index: 100;
            background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(5px);
            color: #cbd5e1; text-decoration: none; padding: 10px 20px;
            border-radius: 10px; font-weight: 600; font-size: 0.9rem;
            border: 1px solid rgba(255,255,255,0.1); transition: all 0.2s;
        }
        .back-btn:hover { background: rgba(59, 130, 246, 0.8); color: white; }

        #mobile-controls {
            position: absolute; bottom: 30px; left: 30px; display: none; z-index: 50;
        }
        .d-pad { display: grid; grid-template-columns: repeat(3, 60px); grid-template-rows: repeat(3, 60px); gap: 6px; }
        .ctrl-btn {
            background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(255,255,255,0.2);
            border-radius: 12px; color: #94a3b8; font-size: 24px; display: flex;
            justify-content: center; align-items: center; user-select: none;
        }
        .ctrl-btn:active { background: rgba(59, 130, 246, 0.6); color: white; }
        #btn-up { grid-column: 2; grid-row: 1; }
        #btn-left { grid-column: 1; grid-row: 2; }
        #btn-right { grid-column: 3; grid-row: 2; }
        #btn-down { grid-column: 2; grid-row: 3; }
    </style>
</head>
<body>

    <a href="index.html" class="back-btn"><i class="fas fa-arrow-left"></i> Exit to Portfolio</a>

    <div id="infoCard">
        <h2 id="infoTitle"><i class="fas fa-map-marker-alt"></i> Location</h2>
        <p id="infoText">Details...</p>
    </div>

    <div id="mobile-controls">
        <div class="d-pad">
            <div class="ctrl-btn" id="btn-up"><i class="fas fa-chevron-up"></i></div>
            <div class="ctrl-btn" id="btn-left"><i class="fas fa-chevron-left"></i></div>
            <div class="ctrl-btn" id="btn-right"><i class="fas fa-chevron-right"></i></div>
            <div class="ctrl-btn" id="btn-down"><i class="fas fa-chevron-down"></i></div>
        </div>
    </div>

    <script>
        // MASSIVE MAP SIZE
        const WORLD_WIDTH = 3200;
        const WORLD_HEIGHT = 3200;

        // Expanded Resume Data! Education, Skills, and Projects!
        const resumeData = [
            // Chapter 1: Education & Experience (Bottom to Middle)
            { id: 'elem', x: 600, y: 2800, icon: 'üéí', title: "Primary Education", text: "<strong>Jose G. Peralta Memorial School</strong><br>Graduated Valedictorian (2011-2017)" },
            { id: 'jhs', x: 1200, y: 2500, icon: 'üè´', title: "Junior High School", text: "<strong>Fellowship Baptist College</strong><br>Graduated With Honor (2017-2021)" },
            { id: 'shs', x: 1800, y: 2200, icon: 'üéì', title: "Senior High (STEM)", text: "<strong>Fellowship Baptist College</strong><br>Graduated With High Honor (2021-2023)" },
            { id: 'college', x: 2400, y: 1900, icon: 'üèõÔ∏è', title: "College", text: "<strong>B.S. Electronics Engineering</strong><br>Polytechnic University of the Philippines<br>Affiliations: OECES, IECEP Batangas." },
            { id: 'work', x: 1600, y: 1600, icon: 'üíº', title: "Work Experience", text: "<strong>Bandai Wireharness (2025):</strong> Developed automated macro systems.<br><br><strong>NOCECO (2023):</strong> Assisted in daily technical operations." },

            // Chapter 2: The Skill Forge (Middle to Top Left)
            { id: 'skill_prog', x: 800, y: 1200, icon: 'üíª', title: "Programming Arsenal", text: "<strong>Languages:</strong> Python, JavaScript, HTML/CSS, Java, C++<br><em>Building robust logic and full-stack applications.</em>" },
            { id: 'skill_hw', x: 1400, y: 1000, icon: '‚öôÔ∏è', title: "Embedded Systems", text: "<strong>Hardware:</strong> Arduino, FPGA, TinkerCAD, Proto Boarding<br><em>Bridging the gap between software and physical circuitry.</em>" },
            { id: 'skill_sim', x: 800, y: 800, icon: 'üìê', title: "Simulation & Design", text: "<strong>Software:</strong> AutoCAD, MATLAB, Multisim, Proteus<br><em>Modeling complex systems and architectural blueprints.</em>" },

            // Chapter 3: The Project Arcade (Top Right)
            { id: 'proj_calc', x: 2200, y: 1200, icon: 'üßÆ', title: "Engineering Tools", text: "<strong>Projects:</strong> Calc Splainer, Determinant Calculator, Matrix Operations.<br><em>Custom software built to solve complex math problems.</em>" },
            { id: 'proj_game', x: 2800, y: 900, icon: 'üïπÔ∏è', title: "Interactive Games", text: "<strong>Projects:</strong> Cyber Viper, Neon Flap, Minimax AI Tic-Tac-Toe, Neon 2048, Toy Kingdom.<br><em>Game development testing complex logic and physics.</em>" },
            { id: 'proj_ai', x: 2200, y: 600, icon: 'ü§ñ', title: "AI Integration", text: "<strong>Project:</strong> D Dwarf Mini AI.<br><em>A sleek conversational assistant powered by Groq LPUs and Meta's Llama 3.3.</em>" }
        ];

        const config = {
            type: Phaser.AUTO,
            width: window.innerWidth,
            height: window.innerHeight,
            pixelArt: true, 
            physics: { default: 'arcade', arcade: { gravity: { y: 0 }, debug: false } },
            scene: { preload: preload, create: create, update: update }
        };

        const game = new Phaser.Game(config);

        let player;
        let cursors, keyW, keyA, keyS, keyD;
        let depthGroup; 
        let currentActiveHouse = null;
        let touchUp = false, touchDown = false, touchLeft = false, touchRight = false;

        function preload() {
            this.load.image('grass', 'https://labs.phaser.io/assets/textures/grass.png');
            this.load.image('tree', 'https://labs.phaser.io/assets/sprites/tree.png');
            this.load.image('building', 'https://labs.phaser.io/assets/sprites/crate.png');
            this.load.image('player', 'https://labs.phaser.io/assets/sprites/spaceman.png');
        }

        function create() {
            this.physics.world.setBounds(0, 0, WORLD_WIDTH, WORLD_HEIGHT);
            
            this.input.keyboard.addCapture('W,A,S,D,UP,DOWN,LEFT,RIGHT');
            this.input.on('pointerdown', () => { window.focus(); });

            this.add.tileSprite(WORLD_WIDTH/2, WORLD_HEIGHT/2, WORLD_WIDTH, WORLD_HEIGHT, 'grass').setDepth(-10);

            depthGroup = this.add.group();

            // Spawn 150 trees for the massive map!
            for (let i = 0; i < 150; i++) {
                let x = Phaser.Math.Between(100, WORLD_WIDTH - 100);
                let y = Phaser.Math.Between(100, WORLD_HEIGHT - 100);
                
                let tooClose = resumeData.some(d => Phaser.Math.Distance.Between(x, y, d.x, d.y) < 250);
                if(!tooClose) {
                    let tree = this.add.image(x, y, 'tree').setScale(1.5); 
                    tree.setOrigin(0.5, 0.9); 
                    depthGroup.add(tree);
                }
            }

            resumeData.forEach(data => {
                this.add.ellipse(data.x, data.y + 10, 160, 40, 0x000000, 0.4).setDepth(-1);
                
                let building = this.add.image(data.x, data.y, 'building').setScale(4);
                building.setOrigin(0.5, 0.8);
                
                this.add.text(data.x, data.y - 100, data.icon + " " + data.id.toUpperCase(), {
                    fontFamily: 'Inter', fontSize: '18px', fontStyle: 'bold',
                    backgroundColor: 'rgba(15, 23, 42, 0.8)', color: '#fff', padding: {x: 8, y: 4}
                }).setOrigin(0.5).setDepth(9999);

                building.info = data;
                depthGroup.add(building);

                let ring = this.add.circle(data.x, data.y + 20, 100, 0x60a5fa, 0);
                ring.setStrokeStyle(3, 0x60a5fa, 0.5);
                this.tweens.add({ targets: ring, scale: 1.2, alpha: 0.1, yoyo: true, repeat: -1, duration: 1500 });
            });

            // Start player at the very bottom near Elementary!
            player = this.physics.add.sprite(600, 3000, 'player').setScale(1.5); 
            player.setOrigin(0.5, 0.9); 
            player.setCollideWorldBounds(true);
            
            this.cameras.main.startFollow(player, true, 0.08, 0.08);
            this.cameras.main.setBounds(0, 0, WORLD_WIDTH, WORLD_HEIGHT);
            this.cameras.main.setZoom(1.1); // Slightly zoomed out to see the huge world

            cursors = this.input.keyboard.createCursorKeys();
            keyW = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.W);
            keyA = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.A);
            keyS = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S);
            keyD = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.D);

            setupMobileControls();
        }

        function update() {
            let vx = 0, vy = 0;
            const speed = 350; // Increased speed for the massive map!

            if (cursors.left.isDown || keyA.isDown || touchLeft) vx = -1;
            if (cursors.right.isDown || keyD.isDown || touchRight) vx = 1;
            if (cursors.up.isDown || keyW.isDown || touchUp) vy = -1;
            if (cursors.down.isDown || keyS.isDown || touchDown) vy = 1;

            const vec = new Phaser.Math.Vector2(vx, vy);
            if (vec.length() > 0) vec.normalize().scale(speed);

            player.setVelocity(vec.x, vec.y);

            depthGroup.children.iterate(function (child) {
                child.setDepth(child.y);
            });
            player.setDepth(player.y);

            checkProximity();
        }

        function checkProximity() {
            let closestBuilding = null;
            let minDistance = 140; 

            depthGroup.children.iterate(function (child) {
                if (child.info) { 
                    const dist = Phaser.Math.Distance.Between(player.x, player.y, child.x, child.y);
                    if (dist < minDistance) {
                        closestBuilding = child;
                        minDistance = dist;
                    }
                }
            });

            if (closestBuilding) {
                if (currentActiveHouse !== closestBuilding) {
                    showInfo("<i class='fas fa-map-marker-alt'></i> " + closestBuilding.info.title, closestBuilding.info.text);
                    currentActiveHouse = closestBuilding;
                }
            } else {
                if (currentActiveHouse !== null) {
                    hideInfo();
                    currentActiveHouse = null;
                }
            }
        }

        const infoCard = document.getElementById("infoCard");

        function showInfo(title, text) {
            document.getElementById("infoTitle").innerHTML = title;
            document.getElementById("infoText").innerHTML = text;
            infoCard.style.display = "block";
            setTimeout(() => { infoCard.classList.add('active'); }, 10); 
        }

        function hideInfo() {
            infoCard.classList.remove('active');
            setTimeout(() => {
                if(!infoCard.classList.contains('active')){
                   infoCard.style.display = "none";
                }
            }, 300);
        }

        function setupMobileControls() {
            if ('ontouchstart' in window || navigator.maxTouchPoints > 0) {
                let mobileContainer = document.getElementById('mobile-controls');
                if(mobileContainer) mobileContainer.style.display = 'block';
            }

            const setupBtn = (id, startFn, endFn) => {
                const btn = document.getElementById(id);
                if (!btn) return; 
                btn.addEventListener('touchstart', (e) => { e.preventDefault(); startFn(); });
                btn.addEventListener('mousedown', (e) => { e.preventDefault(); startFn(); });
                btn.addEventListener('touchend', (e) => { e.preventDefault(); endFn(); });
                btn.addEventListener('mouseup', (e) => { e.preventDefault(); endFn(); });
                btn.addEventListener('mouseleave', (e) => { e.preventDefault(); endFn(); });
            };

            setupBtn('btn-up', () => touchUp = true, () => touchUp = false);
            setupBtn('btn-down', () => touchDown = true, () => touchDown = false);
            setupBtn('btn-left', () => touchLeft = true, () => touchLeft = false);
            setupBtn('btn-right', () => touchRight = true, () => touchRight = false);
        }

        window.addEventListener('resize', () => {
            game.scale.resize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
